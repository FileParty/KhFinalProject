<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="storeMenuDetail">
	<select id="selectStoreDetailInfo" parameterType="_int" resultType="storeDetail">
		SELECT S.*,(SELECT b_businesscode FROM business B WHERE B.B_NO = S.B_NO) B_BUSINESSCODE 
		FROM STORE S WHERE S_NO=#{no}
	</select>
	<select id="selectStoreDetailCategory" parameterType="_int" resultType="storeDetailCategory">
		SELECT * FROM MENU_CATEGORY WHERE S_NO=#{no}
	</select>
	<select id="selectStoreDetailBestMenu" parameterType="_int" resultType="storeDetailMenu">
		SELECT * FROM MENU WHERE S_NO=#{no} AND ME_BEST='Y'
	</select>
	<select id="selectCategoryMenu" parameterType="_int" resultType="storeDetailMenu">
		SELECT * FROM MENU WHERE MT_NO=#{no}
	</select>
	<select id="selectMenuDetail" parameterType="_int" resultType="storeDetailMenu">
		SELECT M.*, (SELECT COUNT(*) FROM MENU_SIDE WHERE ME_NO=#{no}) AS SIDE_COUNT FROM MENU M WHERE ME_NO=#{no}
	</select>
	<select id="selectMenuDetailSide" parameterType="_int" resultType="storeMenuSide">
		SELECT * FROM SIDE WHERE SD_NO IN(SELECT SD_NO FROM MENU_SIDE WHERE ME_NO=#{no})
	</select>
</mapper>
